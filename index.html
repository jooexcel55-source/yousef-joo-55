<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SUPER LEAGUE</title>
<style>
body{
    margin:0;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:#f7b600;
    color:#000;
}
header{
    background: transparent; /* ÙŠØ¨Ù‚Ù‰ Ø´ÙØ§Ù */
    color:#fff;
    padding:0px 2px;       /* Ø®Ù„ÙŠ padding Ø£ÙƒØ¨Ø± Ø¹Ø´Ø§Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ¨Ø§Ù† Ù…Ø±ØªØ§Ø­Ø© */
    display:flex;
    justify-content: flex-start; 
    align-items:center;
    box-shadow:none;         /* Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¸Ù„ */
    position: fixed;
    top:0;
    left:0;
    right:0;
    z-index:1000;
}



.logo{
    color:#27ae60;
    font-size:22px;
    font-weight:bold;
}
nav button{
    background:#1e7e34;
    color:#fff;
    border-radius:10px;       /* Ø£Ù‚Ù„ Ø²ÙˆØ§ÙŠØ§ Ù…Ø¯ÙˆØ±Ø© */
    padding:5px 10px;         /* Ù…Ø³Ø§Ø­Ø© Ø£ÙƒØ¨Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø²Ø± */
    margin:5px 1px;             /* Ù…Ø³Ø§ÙØ© Ø¬Ø§Ù†Ø¨ÙŠØ© Ø£Ù‚Ù„ */
    font-weight:bold;
    font-size:12px;           /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ø£ÙƒØ¨Ø± */
    cursor:pointer;
}
nav button:hover{
    background:#2ecc71;
}

.container{
    position:relative;
    height:100vh;               /* Ø®Ù„ÙŠÙ‡Ø§ ÙƒØ§Ù…Ù„ Ø§Ù„Ø´Ø§Ø´Ø© */
    padding:100px 10px 10px 10px; /* padding-top = Ø§Ø±ØªÙØ§Ø¹ header + Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
}


.page{
    position:absolute;
    inset:0;
    padding:10px;
    opacity:0;
    pointer-events:none;
    transform: translateX(50px);
    transition:0.4s all ease;
}
.page.active{
    opacity:1;
    pointer-events:auto;
    transform: translateX(0);
}
.post,.box{
    background:#fff6a0;
    padding:12px;
    border-radius:10px;
    margin-bottom:12px;
    box-shadow:0 2px 5px rgba(0,0,0,0.2);
    transition:0.3s all;
}
.post:hover,.box:hover{
    transform: scale(1.02);
}
.btn{
    background:#1e7e34;
    color:#fff;
    border:none;
    padding:6px 12px;
    margin:3px 0;
    cursor:pointer;
    border-radius:6px;
}
.btn:hover{
    background:#2ecc71;
}
input,textarea{
    width:96%;
    padding:8px;
    margin:5px 0;
    border-radius:6px;
    border:1px solid #ccc;
}
footer{
    text-align:center;
    padding:10px 5px;
    font-size:14px;
}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
#msgBox {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 95%;
    display: none; /* Ù†Ø®ÙÙŠÙ‡ Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ */
    gap: 5px;
    background: #f7b600;
    padding: 5px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    z-index: 1000;
}
#msgBox input {
    flex: 1;
}

</style>
</head>
<body>

<header>

          <button id="toggleNav" style="background:#1e7e34;color:#fff;border:none;padding:5px 10px;margin-left:10px;border-radius:5px;cursor:pointer;">â˜°</button>
    <nav>
        <button data-target="homePage">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button data-target="home">Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</button>
        <button data-target="chat">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</button>
        <button data-target="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        <button data-target="adminLogin">Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ†</button>
    </nav>
</header>

<div class="container">
    <div id="homePage" class="page active">
        <div style="text-align:center;margin-top:30px;">
            <h1 class="logo" style="font-size:28px;">SUPER LEAGUE</h1>
          <img 
        src="https://i.postimg.cc/sfZcCN9x/Whats-App-Image-2026-01-13-at-12-20-39-AM.jpg" 
        alt="ØµÙˆØ±Ø©" 
        style="width:50%; height:50%; object-fit:contain; border-radius:10px;"
    >
           <h1>Ù…ØµÙ…Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</h1>
          <h3>ÙŠÙˆØ³Ù Ø§Ù„Ù‡ÙˆØ§Ø±ÙŠ</h3>
                   <h3>01128915630</h3>
        </div>
    </div>

    <div id="home" class="page">
        <input placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª" oninput="renderPosts(this.value)">
        <div id="posts"></div>
    </div>

<div id="chat" class="page">
    <input placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„" oninput="renderChat(this.value)">
    <div id="chatBox"></div>
</div>

<!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø«Ø¨Øª Ø®Ø§Ø±Ø¬ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª -->
<div id="msgBox">
    <input id="msg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©">
    <button class="btn" id="sendMsgBtn">Ø¥Ø±Ø³Ø§Ù„</button>
</div>


    <div id="settings" class="page">
        <label>ID Ø§Ù„Ø¬Ù‡Ø§Ø²:</label>
        <input id="uid" disabled>

        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
        <input id="uname" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ" oninput="saveName()">

        <label>ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
        <input type="file" id="userImg" accept="image/*">
        <img id="previewImg" style="width:80px;height:80px;border-radius:50%;display:none;margin-top:5px;">
    </div>

    <div id="adminLogin" class="page">
        <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
        <button class="btn" id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="admin" class="page">
        <button class="btn" id="adminPostsBtn">Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</button>
        <button class="btn" id="adminPredsBtn">Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª</button>
        <button class="btn" id="adminChatBtn">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</button>
        <hr>
        <div id="adminContent"></div>
    </div>
</div>

<footer>
    <div>ØªØ§Ø¨Ø¹ Ø§Ø®Ø¨Ø§Ø± ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</div>
   
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

// --- Firebase Config ---
const firebaseConfig = {
    apiKey: "AIzaSyDgi3--q8nDGfps5MV4AmC8B4PYPMfAPZo",
    authDomain: "yousef-a3438.firebaseapp.com",
    projectId: "yousef-a3438",
    storageBucket: "yousef-a3438.firebasestorage.app",
    messagingSenderId: "645915709487",
    appId: "1:645915709487:web:588dae85e94d33daa636da"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// --- User Setup ---
let uid = localStorage.uid || Date.now();
localStorage.uid = uid;
document.getElementById("uid").value = uid;

let uname = document.getElementById("uname");
uname.value = localStorage.name || "";

let userImg = localStorage.userImg || "";
const previewImg = document.getElementById("previewImg");
if(userImg){
    previewImg.src = userImg;
    previewImg.style.display = "block";
}

// --- Data Arrays ---
let posts = [];
let preds = [];
let chats = [];
let adminTab = "posts";

// --- Pages ---
function showPage(id){
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById(id).classList.add("active");

    // Ø§Ø¸Ù‡Ø§Ø± ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙ‚Ø· ÙÙŠ ØµÙØ­Ø© "chat"
    const msgBox = document.getElementById("msgBox");
    if(id === "chat"){
        msgBox.style.display = "flex";
    } else {
        msgBox.style.display = "none";
    }
}


// --- Nav buttons ---
document.querySelectorAll("nav button").forEach(btn=>{
    btn.addEventListener("click",()=> showPage(btn.dataset.target));
});
document.getElementById("sendMsgBtn").addEventListener("click",sendMsg);
document.getElementById("loginBtn").addEventListener("click",login);

document.getElementById("userImg").addEventListener("change", function(){
    const file = this.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
        userImg = reader.result;
        localStorage.userImg = userImg;
        previewImg.src = userImg;
        previewImg.style.display = "block";
        set(ref(db, "users/" + uid), {
            name: uname.value || uid,
            img: userImg
        });
    };
    reader.readAsDataURL(file);
});

// --- Firebase Listeners ---
const postsRef = ref(db, "posts");
onValue(postsRef, snapshot=>{
    posts = [];
    snapshot.forEach(snap=>{
        let obj = snap.val();
        obj._key = snap.key;
        posts.push(obj);
    });
    renderPosts();
    renderAdminPosts();
});

const predsRef = ref(db, "preds");
onValue(predsRef, snapshot=>{
    preds = [];
    snapshot.forEach(snap=>{
        let obj = snap.val();
        obj._key = snap.key;
        preds.push(obj);
    });
    renderPosts();
    renderAdminPred();
});

const chatsRef = ref(db, "chats");
onValue(chatsRef, snapshot=>{
    chats = [];
    snapshot.forEach(snap=>{
        let obj = snap.val();
        obj._key = snap.key;
        chats.push(obj);
    });
    renderChat();
    renderAdminChat();
});

// --- Rendering ---
function renderPosts(q=""){
    let box = document.getElementById("posts");
    box.innerHTML = "";

    // Ø¯Ù…Ø¬ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª ÙˆØ§Ù„ØªÙˆÙ‚Ø¹Ø§Øª ÙÙŠ Ù…ØµÙÙˆÙØ© ÙˆØ§Ø­Ø¯Ø©
    let allItems = [];

    posts.forEach(p=>{
        if(p.text.includes(q)){
            allItems.push({type:'post', time:p.id, content:p});
        }
    });

    preds.forEach(p=>{
        if(p.desc.includes(q)){
            allItems.push({type:'pred', time:p.id, content:p});
        }
    });

    // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª (id ÙŠÙ…Ø«Ù„ ÙˆÙ‚Øª Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡)
    allItems.sort((a,b) => a.time - b.time);

    // Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø­Ø³Ø¨ ØªØ±ØªÙŠØ¨Ù‡Ø§
    allItems.forEach(item=>{
        if(item.type === 'post'){
            let p = item.content;
            let liked = p.likes && p.likes.includes(uid);
            box.innerHTML +=
            `<div class="post">
                <small>${p.name}</small>
                <p>${p.text}</p>
                ${p.img ? `<img src="${p.img}" width="100%">` : ""}
                <button class="btn" onclick="likePost('${p._key}')" ${liked?"disabled":""}>â¤ï¸ ${p.likes ? p.likes.length : 0}</button>
            </div>`;
        } else if(item.type === 'pred'){
            let p = item.content;
            let liked = p.likes && p.likes.includes(uid);
            box.innerHTML +=
            `<div class="post">
                <small>ØªÙˆÙ‚Ø¹Ø§Øª</small>
                <p>${p.desc}</p>
                <button class="btn" onclick="likePred('${p._key}')" ${liked?"disabled":""}>â¤ï¸ ${p.likes? p.likes.length : 0}</button>
                <div>${p.t1} vs ${p.t2}</div>
            </div>`;
        }
    });
}


function renderChat(q=""){
    let box = document.getElementById("chatBox");
    box.innerHTML = "";
    chats.filter(c=>c.text.startsWith(q)).forEach(c=>{
        let liked = c.likes && c.likes.includes(uid);
        box.innerHTML +=
        `<div class="box" style="display:flex;align-items:flex-start;gap:8px;flex-wrap:wrap;word-break:break-word;">
            <img src="${c.img || ''}" 
                 style="width:40px;height:40px;border-radius:50%;object-fit:cover;flex-shrink:0;">
            <div style="flex:1;">
                <b>${c.user}</b><br>
                ${c.text}<br>
                <button class="btn" onclick="likeChat('${c._key}')" ${liked?"disabled":""}>ğŸ‘ ${c.likes ? c.likes.length : 0}</button>
            </div>
        </div>`;
    });
}

// --- Admin Functions ---
function login(){
    if(document.getElementById("pass").value==="joo5555"){
        showPage("admin");
        document.getElementById("pass").value="";
        renderAdmin();
    } else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø·");
}

function renderAdmin(){
    let c = document.getElementById("adminContent");
    c.innerHTML="";
    if(adminTab==="posts"){
        c.innerHTML=
        `<input type="file" id="pimg">
        <textarea id="ptxt" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†Ø´ÙˆØ±"></textarea>
        <button class="btn" onclick="addPost()">Ø­ÙØ¸</button>
        <input placeholder="Ø¨Ø­Ø«" oninput="renderAdminPosts(this.value)">
        <div id="adminList"></div>`;
        renderAdminPosts();
    }
    if(adminTab==="pred"){
        c.innerHTML=
        `<input id="t1" placeholder="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„">
        <input id="t2" placeholder="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ">
        <textarea id="pdesc" placeholder="ÙˆØµÙ Ø§Ù„ØªÙˆÙ‚Ø¹"></textarea>
        <button class="btn" onclick="addPred()">Ø­ÙØ¸</button>
        <div id="adminList"></div>`;
        renderAdminPred();
    }
    if(adminTab==="chat"){
        c.innerHTML=`<input placeholder="Ø¨Ø­Ø«" oninput="renderAdminChat(this.value)">
        <div id="adminList"></div>`;
        renderAdminChat();
    }
}

document.getElementById("adminPostsBtn").addEventListener("click",()=>{ adminTab="posts"; renderAdmin(); });
document.getElementById("adminPredsBtn").addEventListener("click",()=>{ adminTab="pred"; renderAdmin(); });
document.getElementById("adminChatBtn").addEventListener("click",()=>{ adminTab="chat"; renderAdmin(); });

// --- Add & Likes ---
function addPost(){
    let img = document.getElementById("pimg").files[0];
    let text = document.getElementById("ptxt").value;
    if(!text.trim()) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ÙˆØµÙ");
    let reader = new FileReader();
    reader.onload = ()=>{
        let obj = {id:Date.now(),name:uname.value||"Ù…Ø´Ø±Ù",text:text,img:img?reader.result:"",likes:[]};
        let newPostRef = push(postsRef);
        set(newPostRef,obj);
        document.getElementById("ptxt").value="";
        document.getElementById("pimg").value="";
    };
    if(img) reader.readAsDataURL(img);
    else reader.onload();
}

function addPred(){
    let obj = {id:Date.now(),t1:t1.value,t2:t2.value,desc:pdesc.value,likes:[]};
    let newPredRef = push(predsRef);
    set(newPredRef,obj);
    t1.value=""; t2.value=""; pdesc.value="";
}

function sendMsg(){
    if(!msg.value.trim()) return;
    let obj = {id:Date.now(),user:uname.value||uid,img:userImg||"",text:msg.value,likes:[]};
    let newChatRef = push(chatsRef);
    set(newChatRef,obj);
    msg.value="";
}

// --- Likes Posts ---
function likePost(key){
    let p = posts.find(x=>x._key===key);
    if(!p.likes) p.likes = [];
    if(!p.likes.includes(uid)){
        p.likes.push(uid);
        set(ref(db,"posts/"+key),p);
    }
}

// --- Likes Predictions ---
function likePred(key){
    let p = preds.find(x=>x._key===key);
    if(!p.likes) p.likes = [];
    if(!p.likes.includes(uid)){
        p.likes.push(uid);
        set(ref(db,"preds/"+key),p);
    }
}

// --- Likes Chat ---
function likeChat(key){
    let c = chats.find(x=>x._key===key);
    if(!c.likes) c.likes = [];
    if(!c.likes.includes(uid)){
        c.likes.push(uid);
        set(ref(db,"chats/"+key),c);
    }
}

// --- Admin Render Lists ---
function renderAdminPosts(q=""){
    let l = document.getElementById("adminList");
    l.innerHTML="";
    posts.filter(p=>p.text.includes(q)).forEach(p=>{
        l.innerHTML+=`<div class="box">${p.text} <button class="btn" onclick="deletePost('${p._key}')">ğŸ—‘ï¸</button></div>`;
    });
}
function renderAdminPred(q=""){
    let l = document.getElementById("adminList");
    l.innerHTML="";
    preds.filter(p=>p.desc.includes(q)).forEach(p=>{
        l.innerHTML+=`<div class="box">${p.t1} vs ${p.t2} - ${p.desc} <button class="btn" onclick="deletePred('${p._key}')">ğŸ—‘ï¸</button></div>`;
    });
}
function renderAdminChat(q=""){
    let l = document.getElementById("adminList");
    l.innerHTML="";
    chats.filter(c=>c.text.startsWith(q)).forEach(c=>{
        l.innerHTML+=`<div class="box">${c.user}: ${c.text} <button class="btn" onclick="deleteChat('${c._key}')">ğŸ—‘ï¸</button></div>`;
    });
}

// --- Delete Functions ---
function deletePost(key){ set(ref(db,"posts/"+key),null); }
function deletePred(key){ set(ref(db,"preds/"+key),null); }
function deleteChat(key){ set(ref(db,"chats/"+key),null); }

// --- Save name ---
function saveName(){
    localStorage.name = uname.value;
}

// --- Make functions global ---
window.addPost = addPost;
window.addPred = addPred;
window.sendMsg = sendMsg;
window.likePost = likePost;
window.likePred = likePred;
window.likeChat = likeChat;
window.renderAdminPosts = renderAdminPosts;
window.renderAdminPred = renderAdminPred;
window.renderAdminChat = renderAdminChat;
window.deletePost = deletePost;
window.deletePred = deletePred;
window.deleteChat = deleteChat;
window.saveName = saveName;
  const nav = document.querySelector("header nav");
const toggleBtn = document.getElementById("toggleNav");

// Ø§ÙØªØ±Ø§Ø¶ÙŠØ§ Ø§Ù„Ù€ nav Ø¸Ø§Ù‡Ø±
toggleBtn.addEventListener("click", () => {
    if(nav.style.display === "none"){
        nav.style.display = "flex";  // Ø§Ø¸Ù‡Ø§Ø±
    } else {
        nav.style.display = "none";  // Ø§Ø®ÙØ§Ø¡
    }
});

</script>

</body>
</html>
