<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta charset="UTF-8">
<title>SUPER LEAGUE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:#f7b600;
    color:#000;
}
header{
    background:#222;
    color:#fff;
    padding:10px 15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 2px 5px rgba(0,0,0,0.3);
    position: sticky;
    top:0;
    z-index:1000;
}
.logo{
    color:#27ae60; 
    font-size:22px;
    font-weight:bold;
    font-family: "Sğ•Œâ„™ğ”¼â„ Lğ”¼ğ”¸ğ”¾ğ•Œğ”¼";
}
nav button{
    background:#1e7e34; 
    color:#fff;
    border-radius:6px;
    padding:6px 10px;
    margin:0 2px;
    font-weight:bold;
    transition:0.3s;
    font-size:14px;
}
nav button:hover{
    background:#2ecc71;
}
.container{
    position:relative;
    height:calc(100vh - 60px);
    padding:5px;
}
.page{
    position:absolute;
    inset:0;
    padding:10px;
    opacity:0;
    pointer-events:none;
    transform: translateX(50px);
    transition:0.4s all ease;
}
.page.active{
    opacity:1;
    pointer-events:auto;
    transform: translateX(0);
}
.post,.box{
    background:#fff6a0; 
    padding:12px;
    border-radius:10px;
    margin-bottom:12px;
    box-shadow:0 2px 5px rgba(0,0,0,0.2);
    transition:0.3s all;
}
.post:hover,.box:hover{
    transform: scale(1.02);
}
.btn{
    background:#1e7e34;
    color:#fff;
    border:none;
    padding:6px 12px;
    margin:3px 0;
    cursor:pointer;
    border-radius:6px;
    transition:0.3s all;
}
.btn:hover{
    background:#2ecc71;
}
input,textarea{
    width:96%;
    padding:8px;
    margin:5px 0;
    border-radius:6px;
    border:1px solid #ccc;
}
small{color:#555}
b{color:#000}
footer{
    text-align:center;
    padding:10px 5px;
    font-size:14px;
}
footer a{
    color:#27ae60;
    text-decoration:none;
}
@media (max-width:600px){
  nav{
    display:grid;
    grid-template-columns: 2fr 1fr 1fr;
    grid-template-rows: auto auto;
    gap:5px;
    padding:5px;
  }
  nav button{
    width:100%;
    margin:2px 0;
    font-size:14px;
  }
  nav button:first-child{
    grid-column: 1 / 3;
  }
  nav button:nth-child(2){ grid-column:1; }
  nav button:nth-child(3){ grid-column:2; }
  nav button:nth-child(4){ grid-column:1; }
  nav button:nth-child(5){ grid-column:2; }
}
</style>
</head>
<body>

<header>
<div class="logo">Sğ•Œâ„™ğ”¼â„ Lğ”¼ğ”¸ğ”¾ğ•Œğ”¼</div>
<nav>
<button onclick="showPage('homePage')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<button onclick="showPage('home')">Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</button>
<button onclick="showPage('chat')">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</button>
<button onclick="showPage('settings')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
<button onclick="showPage('adminLogin')">Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ†</button>
</nav>
</header>

<div class="container">

<div style="display:flex; justify-content:center; align-items:center; height:100vh;">
    <img 
        src="https://i.postimg.cc/sfZcCN9x/Whats-App-Image-2026-01-13-at-12-20-39-AM.jpg" 
        alt="ØµÙˆØ±Ø©" 
        style="width:50%; height:50%; object-fit:contain; border-radius:10px;"
    >
</div>

<div id="homePage" class="page active">
<div style="text-align:center;margin-top:30px;">
<h1 class="logo" style="font-size:28px;">Sğ•Œâ„™ğ”¼â„ Lğ”¼ğ”¸ğ”¾ğ•Œğ”¼</h1>
<p>Ø§Ù„Ù…ØµÙ…Ù…: YouSsef JoO</p>
<p>Ø§Ù„Ù‡Ø§ØªÙ: 01128915630</p>
</div>
</div>

<div id="home" class="page">
<input placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª" oninput="renderPosts(this.value)">
<div id="posts"></div>
</div>

<div id="chat" class="page">
<input placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„" oninput="renderChat(this.value)">
<input id="msg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©">
<button class="btn" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
<div id="chatBox"></div>
</div>

<div id="settings" class="page">
<label>ID Ø§Ù„Ø¬Ù‡Ø§Ø²:</label>
<input id="uid" disabled>
<label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
<input id="uname" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ" oninput="saveName()">
</div>

<div id="adminLogin" class="page">
<input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<button class="btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="admin" class="page">
<button class="btn" onclick="adminTab='posts';renderAdmin()">Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</button>
<button class="btn" onclick="adminTab='pred';renderAdmin()">Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª</button>
<button class="btn" onclick="adminTab='chat';renderAdmin()">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</button>
<hr>
<div id="adminContent"></div>
</div>

</div>

<footer>
<div>YouSsef JoO ALhwarY</div>
<div>01128915630</div>
</footer>

<script>
let uid = localStorage.uid || Date.now();
localStorage.uid = uid;
document.getElementById("uid").value = uid;
let uname = document.getElementById("uname");
uname.value = localStorage.name || "";

let posts = [];
let preds = [];
let chats = [];
let adminTab = "posts";

function showPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function saveName(){localStorage.name = uname.value;}

function renderPosts(q=""){
let box = document.getElementById("posts");
box.innerHTML="";
posts.filter(p=>p.text.includes(q)).forEach(p=>{
let liked = p.likes.includes(uid);
box.innerHTML+=`
<div class="post">
<small>${p.name}</small>
<p>${p.text}</p>
${p.img?`<img src="${p.img}" width="100%">`:""}
<button class="btn" onclick="likePost(${p.id})" ${liked?"disabled":""}>
â¤ï¸ ${p.likes.length}
</button>
</div>`;
});
preds.forEach(p=>{
box.innerHTML+=`
<div class="post">
<small>ØªÙˆÙ‚Ø¹Ø§Øª</small>
<p>${p.desc}</p>
<button class="btn" onclick="votePred(${p.id},1)" ${p.voted.includes(uid)?"disabled":""}>
${p.t1} (${p.v1})
</button>
<button class="btn" onclick="votePred(${p.id},2)" ${p.voted.includes(uid)?"disabled":""}>
${p.t2} (${p.v2})
</button>
</div>`;
});
}

function likePost(id){
let p = posts.find(x=>x.id==id);
if(!p.likes.includes(uid)){
p.likes.push(uid);
save();
renderPosts();
}
}

function sendMsg(){
if(!msg.value.trim()) return;
chats.push({id:Date.now(),user:uname.value||uid,text:msg.value,likes:[]});
msg.value="";
save();
renderChat();
}

function renderChat(q=""){
let box = document.getElementById("chatBox");
box.innerHTML="";
chats.filter(c=>c.text.startsWith(q)).forEach(c=>{
let liked = c.likes.includes(uid);
box.innerHTML+=`
<div class="box">
<b>${c.user}</b>: ${c.text}
<button class="btn" onclick="likeMsg(${c.id})" ${liked?"disabled":""}>ğŸ‘ ${c.likes.length}</button>
</div>`;
});
}

function likeMsg(id){
let c = chats.find(x=>x.id==id);
if(!c.likes.includes(uid)){
c.likes.push(uid);
save();
renderChat();
}
}

function login(){
if(pass.value==="joo5555"){ showPage("admin"); pass.value=""; }
else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø·");
}

function renderAdmin(){
let c = document.getElementById("adminContent");
c.innerHTML="";
if(adminTab==="posts"){
c.innerHTML=`
<input type="file" id="pimg">
<textarea id="ptxt" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†Ø´ÙˆØ±"></textarea>
<button class="btn" onclick="addPost()">Ø­ÙØ¸</button>
<input placeholder="Ø¨Ø­Ø«" oninput="renderAdminPosts(this.value)">
<div id="adminList"></div>`;
renderAdminPosts();
}
if(adminTab==="pred"){
c.innerHTML=`
<input id="t1" placeholder="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„">
<input id="t2" placeholder="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ">
<textarea id="pdesc" placeholder="ÙˆØµÙ Ø§Ù„ØªÙˆÙ‚Ø¹"></textarea>
<button class="btn" onclick="addPred()">Ø­ÙØ¸</button>
<div id="adminList"></div>`;
renderAdminPred();
}
if(adminTab==="chat"){
c.innerHTML=`<input placeholder="Ø¨Ø­Ø«" oninput="renderAdminChat(this.value)"><div id="adminList"></div>`;
renderAdminChat();
}
}

function addPost(){
let img = document.getElementById("pimg").files[0];
let text = document.getElementById("ptxt").value;
if(!text.trim()) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ÙˆØµÙ");
let reader = new FileReader();
reader.onload = ()=>{
let postObj = {id:Date.now(), name:uname.value||"Ù…Ø´Ø±Ù", text:text, img:img?reader.result:"", likes:[]};
posts.unshift(postObj);
save(); renderPosts(); renderAdminPosts();
document.getElementById("ptxt").value=""; 
document.getElementById("pimg").value="";
};
if(img) reader.readAsDataURL(img);
else reader.onload();
}

function renderAdminPosts(q=""){
let l = document.getElementById("adminList");
l.innerHTML="";
posts.filter(p=>p.text.includes(q)).forEach(p=>{
l.innerHTML+=`<div class="box">${p.text} <button onclick="delPost(${p.id})">ğŸ—‘ï¸</button></div>`;
});
}

function delPost(id){posts=posts.filter(p=>p.id!=id); save(); renderAdminPosts(); renderPosts();}

function addPred(){
preds.unshift({id:Date.now(),t1:t1.value,t2:t2.value,desc:pdesc.value,v1:0,v2:0,voted:[],name:uname.value||"Ù…Ø´Ø±Ù"});
save(); renderAdminPred(); renderPosts(); t1.value=""; t2.value=""; pdesc.value="";
}
function renderAdminPred(){let l=document.getElementById("adminList"); l.innerHTML=""; preds.forEach(p=>{l.innerHTML+=`<div class="box">${p.t1} vs ${p.t2} <button onclick="delPred(${p.id})">ğŸ—‘ï¸</button></div>`});}
function delPred(id){preds=preds.filter(p=>p.id!=id); save(); renderAdminPred(); renderPosts();}
function votePred(id,t){let p=preds.find(x=>x.id==id); if(p.voted.includes(uid)) return; p.voted.push(uid); t==1?p.v1++:p.v2++; save(); renderPosts();}

function renderAdminChat(q=""){let l=document.getElementById("adminList"); l.innerHTML=""; chats.filter(c=>c.text.startsWith(q)).forEach(c=>{l.innerHTML+=`<div class="box">${c.user}: ${c.text} <button onclick="delMsg(${c.id})">ğŸ—‘ï¸</button></div>`});}
function delMsg(id){chats=chats.filter(c=>c.id!=id); save(); renderChat(); renderAdminChat();}

function save(){localStorage.posts=JSON.stringify(posts); localStorage.preds=JSON.stringify(preds); localStorage.chats=JSON.stringify(chats);}

renderPosts();
renderChat();
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDgi3--q8nDGfps5MV4AmC8B4PYPMfAPZo",
  authDomain: "yousef-a3438.firebaseapp.com",
  projectId: "yousef-a3438",
  storageBucket: "yousef-a3438.firebasestorage.app",
  messagingSenderId: "645915709487",
  appId: "1:645915709487:web:588dae85e94d33daa636da"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Firebase: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ©
const postsRef = ref(db, "posts");
onValue(postsRef, snapshot=>{
  posts = [];
  snapshot.forEach(snap=>posts.push(snap.val()));
  renderPosts(); renderAdminPosts();
});

const chatsRef = ref(db, "chats");
onValue(chatsRef, snapshot=>{
  chats = [];
  snapshot.forEach(snap=>chats.push(snap.val()));
  renderChat(); renderAdminChat();
});

// Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¹Ù„Ù‰ Firebase
const originalAddPost = window.addPost;
window.addPost = function(){
  let img = document.getElementById("pimg").files[0];
  let text = document.getElementById("ptxt").value;
  if(!text.trim()) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ÙˆØµÙ");
  let reader = new FileReader();
  reader.onload = ()=>{
    let postObj = {id:Date.now(), name:uname.value||"Ù…Ø´Ø±Ù", text:text, img:img?reader.result:"", likes:[]};
    let newPostRef = push(postsRef);
    set(newPostRef, postObj);
    document.getElementById("ptxt").value=""; 
    document.getElementById("pimg").value="";
  };
  if(img) reader.readAsDataURL(img);
  else reader.onload();
}

// Ø­ÙØ¸ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù„Ù‰ Firebase
const originalSendMsg = window.sendMsg;
window.sendMsg = function(){
  if(!msg.value.trim()) return;
  let chatObj = {id:Date.now(), user:uname.value||uid, text:msg.value, likes:[]};
  let newChatRef = push(chatsRef);
  set(newChatRef, chatObj);
  msg.value="";
}

// Ù„Ø§ÙŠÙƒ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¹Ù„Ù‰ Firebase
window.likePost = function(id){
  let p = posts.find(x=>x.id==id);
  if(!p.likes.includes(uid)){
    p.likes.push(uid);
    const postRef = ref(db, `posts/${posts.findIndex(x=>x.id==id)}`);
    set(postRef, p);
  }
}

// Ù„Ø§ÙŠÙƒ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù„Ù‰ Firebase
window.likeMsg = function(id){
  let c = chats.find(x=>x.id==id);
  if(!c.likes.includes(uid)){
    c.likes.push(uid);
    const chatRef = ref(db, `chats/${chats.findIndex(x=>x.id==id)}`);
    set(chatRef, c);
  }
}
</script>

</body>
</html>
